# ğŸ—ï¸ Smello Architecture Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SMELLO FOR TEAMS                         â”‚
â”‚                     Next.js 14 + TypeScript                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Personal Mode â”‚       â”‚   Team Mode    â”‚
            â”‚   (Existing)   â”‚       â”‚     (New)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚   â”‚                  â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ AI Gen â”‚            â”‚  Dashboard  â”‚      â”‚ Projects  â”‚
    â”‚ Tools  â”‚            â”‚  My Tasks   â”‚      â”‚ Workflows â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Clerk Auth   â”‚       â”‚   Firestore    â”‚
            â”‚  (Frontend)    â”‚       â”‚   (Backend)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USER     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Action (Create Project, Update Stage, etc.)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              REACT COMPONENT                         â”‚
â”‚  (projects-view.tsx, workflow-tracker.tsx, etc.)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Call Firestore Function
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FIRESTORE SERVICE                          â”‚
â”‚         (lib/firestore-service.ts)                   â”‚
â”‚                                                      â”‚
â”‚  â€¢ createTeamProject()                              â”‚
â”‚  â€¢ updateWorkflow()                                 â”‚
â”‚  â€¢ subscribeToTeamProjects() â† Real-time           â”‚
â”‚  â€¢ logActivity()                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Write to Firestore
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FIRESTORE DATABASE                      â”‚
â”‚                                                      â”‚
â”‚  /organizations/{orgId}/                            â”‚
â”‚    â”œâ”€â”€ projects/{projectId}                         â”‚
â”‚    â”œâ”€â”€ workflows/{workflowId}                       â”‚
â”‚    â””â”€â”€ teams/{teamId}/                              â”‚
â”‚        â””â”€â”€ sprints/{sprintId}                       â”‚
â”‚                                                      â”‚
â”‚  /activities/{activityId}                           â”‚
â”‚  /comments/{commentId}                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Real-time Update (onSnapshot)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ALL CONNECTED CLIENTS                        â”‚
â”‚     (Automatic UI Update - No Refresh!)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Firestore Collections Structure

```
firestore/
â”‚
â”œâ”€â”€ users/                          â† Personal user profiles
â”‚   â””â”€â”€ {userId}/
â”‚       â”œâ”€â”€ name
â”‚       â”œâ”€â”€ email
â”‚       â”œâ”€â”€ role
â”‚       â””â”€â”€ teamId
â”‚
â”œâ”€â”€ projects/                       â† Personal projects (existing)
â”‚   â””â”€â”€ {projectId}/
â”‚       â”œâ”€â”€ userId
â”‚       â”œâ”€â”€ name
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ organizations/                  â† NEW: Team organizations
â”‚   â””â”€â”€ {orgId}/
â”‚       â”œâ”€â”€ name
â”‚       â”œâ”€â”€ createdBy
â”‚       â”œâ”€â”€ createdAt
â”‚       â”‚
â”‚       â”œâ”€â”€ projects/              â† NEW: Team projects
â”‚       â”‚   â””â”€â”€ {projectId}/
â”‚       â”‚       â”œâ”€â”€ name
â”‚       â”‚       â”œâ”€â”€ description
â”‚       â”‚       â”œâ”€â”€ clientName
â”‚       â”‚       â”œâ”€â”€ workflowId
â”‚       â”‚       â”œâ”€â”€ status
â”‚       â”‚       â””â”€â”€ ...
â”‚       â”‚
â”‚       â”œâ”€â”€ workflows/             â† NEW: Workflow tracking
â”‚       â”‚   â””â”€â”€ {workflowId}/
â”‚       â”‚       â”œâ”€â”€ projectId
â”‚       â”‚       â”œâ”€â”€ templateId
â”‚       â”‚       â”œâ”€â”€ currentStageId
â”‚       â”‚       â”œâ”€â”€ stages[]
â”‚       â”‚       â””â”€â”€ ...
â”‚       â”‚
â”‚       â”œâ”€â”€ tasks/                 â† Team tasks
â”‚       â”‚   â””â”€â”€ {taskId}/
â”‚       â”‚
â”‚       â””â”€â”€ teams/                 â† Teams within org
â”‚           â””â”€â”€ {teamId}/
â”‚               â”œâ”€â”€ name
â”‚               â”œâ”€â”€ members[]
â”‚               â”‚
â”‚               â””â”€â”€ sprints/       â† Sprints
â”‚                   â””â”€â”€ {sprintId}/
â”‚
â”œâ”€â”€ activities/                    â† NEW: Activity logs (global)
â”‚   â””â”€â”€ {activityId}/
â”‚       â”œâ”€â”€ projectId
â”‚       â”œâ”€â”€ userId
â”‚       â”œâ”€â”€ action
â”‚       â”œâ”€â”€ details
â”‚       â””â”€â”€ createdAt
â”‚
â”œâ”€â”€ comments/                      â† NEW: Comments system (global)
â”‚   â””â”€â”€ {commentId}/
â”‚       â”œâ”€â”€ projectId
â”‚       â”œâ”€â”€ stageId (optional)
â”‚       â”œâ”€â”€ userId
â”‚       â”œâ”€â”€ content
â”‚       â”œâ”€â”€ mentions[]
â”‚       â””â”€â”€ reactions[]
â”‚
â”œâ”€â”€ invites/                       â† Organization invites
â”‚   â””â”€â”€ {inviteId}/
â”‚
â”œâ”€â”€ usageStats/                    â† Personal usage tracking
â”‚   â””â”€â”€ {userId}/
â”‚
â””â”€â”€ apiKeys/                       â† Personal API keys (encrypted)
    â””â”€â”€ {userId}/
```

---

## Component Hierarchy

```
app/
â”‚
â”œâ”€â”€ page.tsx                       â† Landing / Entry point
â”‚
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ page.tsx                   â† Personal dashboard
â”‚
â””â”€â”€ team/
    â””â”€â”€ page.tsx                   â† Team dashboard entry
        â”‚
        â””â”€â”€ TeamDashboard
            â”‚
            â”œâ”€â”€ TeamsLayout        â† Sidebar navigation
            â”‚   â”œâ”€â”€ Projects tab
            â”‚   â”œâ”€â”€ Collaboration tab
            â”‚   â”œâ”€â”€ Sprints tab
            â”‚   â””â”€â”€ Analytics tab
            â”‚
            â””â”€â”€ Content Area
                â”‚
                â”œâ”€â”€ ProjectsView                    â† NEW
                â”‚   â”œâ”€â”€ CreateProjectModal         â† NEW
                â”‚   â”œâ”€â”€ Project Cards
                â”‚   â””â”€â”€ WorkflowTracker            â† NEW
                â”‚       â”œâ”€â”€ Progress Bar
                â”‚       â”œâ”€â”€ Stage Timeline
                â”‚       â””â”€â”€ Stage Details
                â”‚
                â”œâ”€â”€ CollaborationHub
                â”‚   â”œâ”€â”€ TaskTable
                â”‚   â””â”€â”€ Activity Feed
                â”‚
                â”œâ”€â”€ SprintBoard
                â”‚   â””â”€â”€ Kanban View
                â”‚
                â””â”€â”€ Analytics
                    â””â”€â”€ Charts
```

---

## Real-Time Sync Flow

```
User A's Browser                    Firestore                    User B's Browser
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Update Stage Status
   â”‚
   â”œâ”€â”€â–º updateWorkflowStage()
   â”‚    â”‚
   â”‚    â””â”€â”€â–º Write to Firestore â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                   â”‚
   â”‚                                                   â–¼
   â”‚                                          onSnapshot listener
   â”‚                                          detects change
   â”‚                                                   â”‚
   â”‚                                                   â–¼
   â”‚                                          Callback fires
   â”‚                                                   â”‚
   â”‚                                                   â–¼
   â”‚                                          UI updates
   â”‚                                          automatically!
   â”‚                                                   â”‚
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
   onSnapshot listener
   on User A also fires
   â”‚
   â–¼
   UI updates with
   confirmation
```

---

## Feature Integration Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SMELLO FEATURES                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  PM Tools      â”‚  â”‚  Team Collab   â”‚  â”‚  AI Tools   â”‚
â”‚  (Existing)    â”‚  â”‚     (NEW)      â”‚  â”‚ (Existing)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â”‚                   â”‚                   â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ PRD Gen â”‚         â”‚Projects â”‚        â”‚Idea Gen â”‚
   â”‚ Roadmap â”‚         â”‚Workflow â”‚        â”‚Research â”‚
   â”‚ Journey â”‚         â”‚Comments â”‚        â”‚Compete  â”‚
   â”‚ Risk    â”‚         â”‚Notifs   â”‚        â”‚         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FIRESTORE    â”‚
                    â”‚   + Real-time  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT REQUEST                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LAYER 1: Clerk Authentication              â”‚
â”‚         âœ“ User must be logged in                       â”‚
â”‚         âœ“ Valid session token                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LAYER 2: Firestore Security Rules               â”‚
â”‚         âœ“ Check user owns resource (personal)          â”‚
â”‚         âœ“ Check user in organization (team)            â”‚
â”‚         âœ“ Check resource exists                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LAYER 3: Application Logic                    â”‚
â”‚         âœ“ Validate input data                          â”‚
â”‚         âœ“ Check business rules                         â”‚
â”‚         âœ“ Log activity                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LAYER 4: Data Encryption                   â”‚
â”‚         âœ“ API keys encrypted at rest                   â”‚
â”‚         âœ“ HTTPS in transit                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Not Started â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User clicks "Start"
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ In Progress â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
       â”‚                  â”‚
       â”‚ User clicks      â”‚ User clicks
       â”‚ "Complete"       â”‚ "Resume"
       â”‚                  â”‚
       â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚  Completed  â”‚     â”‚  Paused   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ User adds blocker
                          â”‚
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Blocked  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Notification Flow

```
User Action                Activity Log              Notification
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Create Project  â”€â”€â”€â”€â”€â”€â–º  logActivity()  â”€â”€â”€â”€â”€â”€â–º  All team members
                         â”‚                        see notification
                         â”‚
Update Stage    â”€â”€â”€â”€â”€â”€â–º  logActivity()  â”€â”€â”€â”€â”€â”€â–º  Mentioned users
                         â”‚                        get highlighted
                         â”‚
Add Comment     â”€â”€â”€â”€â”€â”€â–º  logActivity()  â”€â”€â”€â”€â”€â”€â–º  @mentioned users
with @mention            â”‚                        get notification
                         â”‚
                         â–¼
                  Stored in /activities/
                         â”‚
                         â–¼
              subscribeToProjectActivities()
                         â”‚
                         â–¼
              Real-time update in
              NotificationCenter
```

---

## Command Palette Actions

```
Cmd+K opens palette
       â”‚
       â”œâ”€â–º Type "create" â”€â”€â–º Create New Project
       â”‚                     Create New Task
       â”‚
       â”œâ”€â–º Type "go" â”€â”€â”€â”€â–º Go to Projects
       â”‚                   Go to Collaboration
       â”‚                   Go to Sprints
       â”‚                   Go to Analytics
       â”‚
       â”œâ”€â–º Type "search" â”€â–º Search Projects
       â”‚                    Search Tasks
       â”‚
       â””â”€â–º Type "settings"â”€â–º Open Settings
                             API Keys
                             Profile
```

---

## Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  OPTIMIZATION LAYERS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CLIENT-SIDE CACHING
   â”œâ”€â–º React state management
   â”œâ”€â–º Zustand for global state
   â””â”€â–º Local storage for preferences

2. FIRESTORE OPTIMIZATIONS
   â”œâ”€â–º Composite indexes for fast queries
   â”œâ”€â–º Pagination (limit queries)
   â””â”€â–º Real-time listeners (no polling!)

3. CODE SPLITTING
   â”œâ”€â–º Dynamic imports for routes
   â”œâ”€â–º Lazy loading components
   â””â”€â–º Tree shaking unused code

4. ASSET OPTIMIZATION
   â”œâ”€â–º Image optimization (Next.js)
   â”œâ”€â–º Font optimization
   â””â”€â–º CSS minification
```

---

## Summary

**Smello Architecture Features:**

âœ… **Dual Mode**: Personal + Team collaboration  
âœ… **Real-time Sync**: Firestore onSnapshot listeners  
âœ… **Secure**: Multi-layer security (Clerk + Firestore rules)  
âœ… **Scalable**: Nested collections for organization  
âœ… **Fast**: Optimized queries with composite indexes  
âœ… **Collaborative**: Comments, mentions, notifications  
âœ… **Intuitive**: Command palette, keyboard shortcuts  
âœ… **Auditable**: Complete activity logging  

**Ready for production!** ğŸš€
